<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1c1917"> <!-- Koyu taş rengi, ciddiyet ve sükunet -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Mana Defteri</title>

    <!-- Tailwind CSS (Zahiri Güzellik İçin) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Başlıklar için mistik bir font, yazılar için okunaklı bir font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <!-- Uygulama İkonu (SVG Base64) -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%231c1917' rx='20'/><path d='M50 20 C30 20 20 40 20 60 C20 80 40 90 50 90 C60 90 80 80 80 60 C80 40 70 20 50 20 Z' fill='none' stroke='%23d6d3d1' stroke-width='4'/><circle cx='50' cy='55' r='15' fill='%23d6d3d1'/></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%231c1917' rx='20'/><path d='M50 20 C30 20 20 40 20 60 C20 80 40 90 50 90 C60 90 80 80 80 60 C80 40 70 20 50 20 Z' fill='none' stroke='%23d6d3d1' stroke-width='4'/><circle cx='50' cy='55' r='15' fill='%23d6d3d1'/></svg>">

    <style>
        /* Tasavvufi Dokunuşlar (Özel CSS) */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f4; /* Taş kağıt rengi */
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
            overflow: hidden; /* Uygulama hissi için kaydırmayı biz yöneteceğiz */
        }

        h1, h2, h3, .tasavvuf-font {
            font-family: 'Cinzel', serif;
        }

        /* 3D Kart Efekti */
        .kart-sahne {
            perspective: 1000px;
        }

        .kart {
            transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
            transform-style: preserve-3d;
            position: relative;
        }

        .kart.cevrildi {
            transform: rotateY(180deg);
        }

        .kart-yuz {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 1rem;
        }

        .kart-arka {
            transform: rotateY(180deg);
        }

        /* Scrollbar Gizleme */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Sekme Geçiş Animasyonu */
        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Zikirmatik Butonu Efekti */
        .btn-press:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800 h-screen flex flex-col">

    <!-- Üst Bar: Gönül Meclisi -->
    <header class="bg-stone-900 text-stone-200 p-4 shadow-lg z-20 flex justify-between items-center shrink-0">
        <div class="flex items-center gap-3">
            <svg class="w-6 h-6 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
            <h1 class="text-xl font-bold tracking-wide text-amber-500">Mana Defteri</h1>
        </div>
        <button onclick="zikirmatikAc()" class="text-stone-400 hover:text-amber-400 transition">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
        </button>
    </header>

    <!-- Ana İçerik Sahnesi -->
    <main id="icerik-alani" class="flex-1 overflow-y-auto no-scrollbar p-4 pb-24 relative" ontouchstart="dokunmaBasladi(event)" ontouchend="dokunmaBitti(event)">
        <!-- İçerik JavaScript ile buraya doldurulacak -->
    </main>

    <!-- Zikirmatik Modalı (Gizli) -->
    <div id="zikirmatik-modal" class="fixed inset-0 bg-stone-900/90 z-50 hidden flex items-center justify-center backdrop-blur-sm transition-opacity duration-300 opacity-0">
        <div class="bg-stone-800 p-8 rounded-2xl shadow-2xl text-center border border-stone-700 w-3/4 max-w-sm">
            <h3 class="text-amber-500 text-2xl mb-4 tasavvuf-font">Zikirmatik</h3>
            <div class="bg-stone-900 rounded-lg p-6 mb-6 shadow-inner border border-stone-700">
                <span id="zikir-sayisi" class="text-6xl text-emerald-500 font-mono">0</span>
            </div>
            <div class="flex justify-center gap-4">
                <button onclick="zikirCek()" class="btn-press w-20 h-20 rounded-full bg-emerald-700 text-white shadow-lg border-4 border-emerald-900 flex items-center justify-center text-xl">
                    Hu
                </button>
                <button onclick="zikirSifirla()" class="btn-press w-12 h-12 rounded-full bg-red-900/50 text-red-200 border-2 border-red-800 flex items-center justify-center mt-4">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                </button>
            </div>
            <button onclick="zikirmatikKapat()" class="mt-6 text-stone-400 text-sm underline">Meclise Dön</button>
        </div>
    </div>

    <!-- Alt Navigasyon Barı -->
    <nav class="bg-stone-900 shadow-[0_-5px_15px_rgba(0,0,0,0.3)] shrink-0 pb-safe">
        <div class="flex justify-around items-center p-2">
            <!-- Butonlar JS ile oluşturulacak -->
            <div id="nav-container" class="flex w-full justify-around"></div>
        </div>
    </nav>

    <!-- JAVASCRIPT: Ruh ve Mantık -->
    <script>
        // =================================================================
        // AZİZİM, HİKMET HAZİNESİNİ BURADAN DÜZENLEYEBİLİRSİN
        // Buradaki tırnak işaretlerinin içindeki metinleri değiştirmen yeterlidir.
        // =================================================================
        
        const MANA_KARTLARI = {
            ayet: [
                {
                    baslik: "İnşirah Suresi, 5-6",
                    onYuz: "Muhakkak ki, zorlukla beraber bir kolaylık vardır.",
                    arkaYuz: "Bu ayet, dervişin gönlüne su serper. Bilir ki her celal tecellisinin içinde bir cemal gizlidir. Daralma (kabz) varsa, genişleme (bast) yoldadır. Sabır, acı değil, müjdenin anahtarıdır."
                },
                {
                    baslik: "Bakara Suresi, 115",
                    onYuz: "Doğu da Allah'ındır batı da. Nereye dönerseniz Allah'ın yüzü oradadır.",
                    arkaYuz: "Vahdet-i Vücud'un temel taşlarından biri. Derviş nereye baksa Hakk'ı görür. Yönler, mekanlar sınırlıdır; O ise sınırsızdır. Her zerrede O'nun esması tecelli eder."
                },
                {
                    baslik: "Kaf Suresi, 16",
                    onYuz: "Biz ona şah damarından daha yakınız.",
                    arkaYuz: "Allah'ı uzaklarda arama ey yolcu. O, senin 'ben' dediğin yerden daha yakındır sana. Nefs perdesini kaldırırsan, O'nunla baş başa kalırsın."
                }
            ],
            hadis: [
                {
                    baslik: "Kudsi Hadis",
                    onYuz: "Ben, kulumun zannı üzereyim.",
                    arkaYuz: "Kul, Rabbi hakkında ne düşünürse, Rabbi ona öyle tecelli eder. Ümitvar olan rahmet bulur, korkan emniyet. Gönlünü hüsn-ü zan ile süsle azizim."
                },
                {
                    baslik: "Hadis-i Şerif",
                    onYuz: "Nefsini bilen Rabbini bilir.",
                    arkaYuz: "Kendi acziyetini, hiçliğini anlayan kişi; Rabbinin kudretini ve varlığını idrak eder. Yolculuk dışarıya değil, içeriye, öz benliğedir."
                }
            ],
            tasavvuf: [
                {
                    baslik: "İbni Arabi (k.s.)",
                    onYuz: "Sen sandığın şey değilsin, sen O'sun.",
                    arkaYuz: "Varlığın hakiki sahibi Allah'tır. Senin varlığın, güneşin vurduğu aynadaki yansıma gibidir. Ayna da sen değilsin, ışık da. Sen sadece tecelligahsın."
                },
                {
                    baslik: "Yunus Emre",
                    onYuz: "Beni bende demen bende değilim, bir ben vardır bende benden içeri.",
                    arkaYuz: "Yunus bizim dilimizdir. O, bedeni kafes, ruhu kuşa benzetir. Asıl kimlik, et ve kemik değil, o İlahi nefestir."
                },
                {
                    baslik: "Hz. Mevlana",
                    onYuz: "Dün akıllıydım dünyayı değiştirmek isterdim. Bugün bilgeyim kendimi değiştiriyorum.",
                    arkaYuz: "Dervişin cihadı nefsi iledir. Dış dünyadaki kavga bitmez, ama içindeki kavga biterse bütün alem selamete erer."
                }
            ],
            tarih: [
                {
                    baslik: "Bedir Kuyuları",
                    onYuz: "313 Sahabe ve Meleklerin yardımı.",
                    arkaYuz: "Sayıların çokluğu değil, imanın kuvveti galip gelir. Tarih, Hakk'a dayananların zaferleriyle doludur. Bedir, bir ruh halidir; kıyamete kadar her müminin kalbinde yaşanır."
                },
                {
                    baslik: "İstanbul'un Fethi",
                    onYuz: "Ya ben İstanbul'u alırım, ya İstanbul beni.",
                    arkaYuz: "Fatih Sultan Mehmed Han, sadece bir şehri değil, gönülleri de fethetmiştir. Maddi kılıç ile manevi dua birleşince fetih müyesser olur."
                }
            ],
            gonul: [
                {
                    baslik: "Gece Duası",
                    onYuz: "Rabbim, beni bana bırakma.",
                    arkaYuz: "En büyük felaket, insanın nefsiyle baş başa kalmasıdır. Gönlümüze düşen en samimi yakarış budur."
                },
                {
                    baslik: "Tefekkür",
                    onYuz: "Bir yaprak bile O'nun izni olmadan düşmez.",
                    arkaYuz: "Bugün gördüğüm sararmış yaprak bana ölümü değil, teslimiyeti hatırlattı. Rüzgar nereye eserse, yaprak itirazsız oraya gider."
                }
            ]
        };

        // =================================================================
        // SİSTEM KODLARI (BU KISIM MAKİNENİN ÇARKLARIDIR)
        // =================================================================

        const sekmeler = [
            { id: 'ayet', ad: 'Ayetler', ikon: 'M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253' },
            { id: 'hadis', ad: 'Hadisler', ikon: 'M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z' },
            { id: 'tasavvuf', ad: 'Hikmet', ikon: 'M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z' },
            { id: 'tarih', ad: 'Tarih', ikon: 'M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z' },
            { id: 'gonul', ad: 'Gönül', ikon: 'M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z' }
        ];

        let aktifSekme = 'ayet';
        let zikirSayisi = 0;

        // Sayfa Yüklendiğinde
        document.addEventListener('DOMContentLoaded', () => {
            navigasyonuOlustur();
            icerigiYukle(aktifSekme);
            
            // Zikir sayısını hafızadan al
            const kayitliZikir = localStorage.getItem('zikirSayisi');
            if(kayitliZikir) zikirSayisi = parseInt(kayitliZikir);
            document.getElementById('zikir-sayisi').innerText = zikirSayisi;
        });

        // Navigasyon Barını Oluştur
        function navigasyonuOlustur() {
            const container = document.getElementById('nav-container');
            container.innerHTML = '';
            
            sekmeler.forEach(sekme => {
                const btn = document.createElement('button');
                btn.className = `flex flex-col items-center gap-1 p-2 transition-all duration-300 ${aktifSekme === sekme.id ? 'text-amber-500 scale-110' : 'text-stone-500'}`;
                btn.onclick = () => sekmeDegistir(sekme.id);
                btn.innerHTML = `
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${sekme.ikon}"></path></svg>
                    <span class="text-[10px] font-medium tracking-wide">${sekme.ad}</span>
                `;
                container.appendChild(btn);
            });
        }

        // Sekme Değiştirme
        function sekmeDegistir(yeniId) {
            if (aktifSekme === yeniId) return;
            aktifSekme = yeniId;
            navigasyonuOlustur();
            icerigiYukle(yeniId);
        }

        // İçeriği Ekrana Bas (Kartları Oluştur)
        function icerigiYukle(kategori) {
            const alan = document.getElementById('icerik-alani');
            alan.innerHTML = ''; // Temizle
            
            const veriler = MANA_KARTLARI[kategori];
            
            if (!veriler || veriler.length === 0) {
                alan.innerHTML = `<div class="flex h-full items-center justify-center text-stone-400 italic">Henüz bu sayfaya bir kelam düşmedi azizim...</div>`;
                return;
            }

            const listeDiv = document.createElement('div');
            listeDiv.className = 'flex flex-col gap-6 fade-in pb-8';

            veriler.forEach((veri, index) => {
                // Kart Sahnesi
                const sahne = document.createElement('div');
                sahne.className = 'kart-sahne h-64 w-full cursor-pointer group';
                sahne.onclick = function() {
                    this.querySelector('.kart').classList.toggle('cevrildi');
                };

                // Kartın Kendisi
                const kart = document.createElement('div');
                kart.className = 'kart w-full h-full shadow-[0_10px_20px_rgba(0,0,0,0.15)] rounded-2xl';

                // Ön Yüz
                const onYuz = document.createElement('div');
                onYuz.className = 'kart-yuz bg-white border border-stone-200 p-6 flex flex-col justify-center items-center text-center rounded-2xl bg-[url("https://www.transparenttextures.com/patterns/cream-paper.png")]';
                onYuz.innerHTML = `
                    <div class="text-amber-600 font-bold text-sm mb-2 uppercase tracking-widest border-b border-amber-200 pb-1">${veri.baslik}</div>
                    <div class="text-stone-800 text-xl font-serif leading-relaxed tasavvuf-font">"${veri.onYuz}"</div>
                    <div class="absolute bottom-4 text-stone-400 text-xs flex items-center gap-1">
                        <svg class="w-4 h-4 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                        Manası için dokun
                    </div>
                `;

                // Arka Yüz
                const arkaYuz = document.createElement('div');
                arkaYuz.className = 'kart-arka kart-yuz bg-stone-800 text-stone-200 p-6 flex flex-col justify-center items-center text-center rounded-2xl border border-stone-700 bg-[url("https://www.transparenttextures.com/patterns/stardust.png")]';
                arkaYuz.innerHTML = `
                    <div class="text-amber-500 font-bold text-lg mb-3 tasavvuf-font">Batıni Mana</div>
                    <div class="text-stone-300 text-base leading-relaxed overflow-y-auto max-h-full no-scrollbar">${veri.arkaYuz}</div>
                `;

                kart.appendChild(onYuz);
                kart.appendChild(arkaYuz);
                sahne.appendChild(kart);
                listeDiv.appendChild(sahne);
            });

            alan.appendChild(listeDiv);
        }

        // Swipe (Kaydırma) Algılama
        let dokunmaBaslangicX = 0;
        let dokunmaBitisX = 0;

        function dokunmaBasladi(e) {
            dokunmaBaslangicX = e.changedTouches[0].screenX;
        }

        function dokunmaBitti(e) {
            dokunmaBitisX = e.changedTouches[0].screenX;
            kaydirmaHesapla();
        }

        function kaydirmaHesapla() {
            const fark = dokunmaBaslangicX - dokunmaBitisX;
            const esik = 50; // Hassasiyet

            if (Math.abs(fark) > esik) {
                const mevcutIndex = sekmeler.findIndex(s => s.id === aktifSekme);
                if (fark > 0) {
                    // Sola kaydırdı (İleri git)
                    if (mevcutIndex < sekmeler.length - 1) sekmeDegistir(sekmeler[mevcutIndex + 1].id);
                } else {
                    // Sağa kaydırdı (Geri git)
                    if (mevcutIndex > 0) sekmeDegistir(sekmeler[mevcutIndex - 1].id);
                }
            }
        }

        // Zikirmatik Fonksiyonları
        function zikirmatikAc() {
            const modal = document.getElementById('zikirmatik-modal');
            modal.classList.remove('hidden');
            // Timeout animasyonun çalışması için gerekli
            setTimeout(() => modal.classList.remove('opacity-0'), 10);
        }

        function zikirmatikKapat() {
            const modal = document.getElementById('zikirmatik-modal');
            modal.classList.add('opacity-0');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        function zikirCek() {
            zikirSayisi++;
            document.getElementById('zikir-sayisi').innerText = zikirSayisi;
            localStorage.setItem('zikirSayisi', zikirSayisi);
            
            // Titreşim (Mobil cihazlarda)
            if (navigator.vibrate) navigator.vibrate(50);
        }

        function zikirSifirla() {
            if(confirm("Tesbihatı sıfırlamak ister misin derviş kardeşim?")) {
                zikirSayisi = 0;
                document.getElementById('zikir-sayisi').innerText = zikirSayisi;
                localStorage.setItem('zikirSayisi', 0);
            }
        }
    </script>
</body>
</html>
